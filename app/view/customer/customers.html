<html>
{{> head}}
<body>
{{> navigate}}
<script>
    $(document).ready(function () {
        $("#customers").dataTable();

        $(".delete").click(function (e) {
            $.ajax({
                url: "/api/customer/" + $(this).attr("id"),
                method: "DELETE",
                success: function (result) {
                    alert("delete success");
                    location.reload();
                }
            });
            return false;
        });
    });
</script>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <table id="customers" class="display">
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Phone</th>
                    <th>Email</th>
                    <th><!--controls--></th>
                </tr>
                </thead>
                <tbody>
                {{#customers}}
                <tr>
                    <td>{{name}}</td>
                    <td>{{phone}}</td>
                    <td>{{email}}</td>
                    <td>
                        <a class="btn btn-default" href="/view/edit_customer/{{id}}">edit</a>
                        <a class="btn btn-default delete" href="" id={{id}}>delete</a>
                    </td>
                </tr>
                {{/customers}}
                </tbody>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <a class="btn btn-primary" href="/view/create_customer">Add New Customer</a>
        </div>
    </div>
</div>
</body>
</html>
